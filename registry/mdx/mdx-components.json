{
  "name": "mdx-components",
  "type": "component",
  "description": "Auto-discovering MDX component mapper - automatically uses all installed mdx-ui components",
  "dependencies": [
    "@types/mdx"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "mdx-components.tsx",
      "content": "/**\n * Auto-discovering MDX Components for Next.js\n *\n * This file automatically discovers and uses ALL mdx-ui components you've installed.\n * No manual imports needed - just add components with the CLI and they work!\n *\n * @example Quick Start (2 steps):\n * ```bash\n * # 1. Install components\n * npx @suryaravikumar/mdx-ui add callout steps tabs\n *\n * # 2. Create mdx-components.tsx at root:\n * export { useMDXComponents } from './components/mdx-ui/mdx-components'\n *\n * # That's it! All components auto-work in your .mdx files\n * ```\n */\n\nimport type { MDXComponents } from \"mdx/types\"\nimport * as React from \"react\"\n\n// Helper to safely import components\nfunction tryImport(path: string) {\n  try {\n    return require(path)\n  } catch {\n    return null\n  }\n}\n\n/**\n * Auto-discovers all installed mdx-ui components\n * @returns Object with all available components\n */\nfunction discoverComponents() {\n  const components: any = {}\n\n  // List of all possible mdx-ui components\n  const availableComponents = [\n    { file: './blockquote', exports: ['Blockquote'] },\n    { file: './callout', exports: ['Callout'] },\n    { file: './code-block', exports: ['CodeBlock'] },\n    { file: './emphasis', exports: ['Strong', 'Em'] },\n    { file: './headings', exports: ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'] },\n    { file: './heading', exports: ['Heading'] },\n    { file: './horizontal-rule', exports: ['HorizontalRule'] },\n    { file: './image', exports: ['Image'] },\n    { file: './inline-code', exports: ['InlineCode'] },\n    { file: './list', exports: ['UnorderedList', 'OrderedList', 'ListItem'] },\n    { file: './paragraph', exports: ['Paragraph', 'Lead', 'Intro', 'Large', 'Small', 'Muted'] },\n    { file: './steps', exports: ['Steps', 'Step'] },\n    { file: './tabs', exports: ['Tabs', 'TabsList', 'TabsTrigger', 'TabsContent'] },\n    { file: './tree', exports: ['Tree', 'TreeItem'] },\n    { file: './file-tree', exports: ['FileTree'] },\n  ]\n\n  // Auto-import each component if it exists\n  for (const { file, exports } of availableComponents) {\n    const module = tryImport(file)\n    if (module) {\n      for (const exportName of exports) {\n        if (module[exportName]) {\n          components[exportName] = module[exportName]\n        }\n      }\n    }\n  }\n\n  return components\n}\n\n/**\n * Provides MDX component mappings with auto-discovery\n * Automatically uses all installed mdx-ui components\n *\n * @example Basic usage:\n * ```tsx\n * // mdx-components.tsx (root level)\n * export { useMDXComponents } from './components/mdx-ui/mdx-components'\n * ```\n *\n * @example With custom components:\n * ```tsx\n * import { useMDXComponents as getBaseComponents } from './components/mdx-ui/mdx-components'\n * import type { MDXComponents } from 'mdx/types'\n *\n * export function useMDXComponents(components: MDXComponents): MDXComponents {\n *   return {\n *     ...getBaseComponents(components),\n *     MyComponent: () => <div>Custom!</div>,\n *   }\n * }\n * ```\n */\nexport function useMDXComponents(components: MDXComponents = {}): MDXComponents {\n  const discovered = discoverComponents()\n\n  return {\n    // Auto-mapped headings (with fallbacks if not installed)\n    h1: discovered.H1 || ((props: any) => (\n      <h1 className=\"scroll-m-20 text-4xl font-bold tracking-tight\" {...props} />\n    )),\n    h2: discovered.H2 || ((props: any) => (\n      <h2 className=\"scroll-m-20 text-3xl font-semibold tracking-tight first:mt-0 mt-10\" {...props} />\n    )),\n    h3: discovered.H3 || ((props: any) => (\n      <h3 className=\"scroll-m-20 text-2xl font-semibold tracking-tight mt-8\" {...props} />\n    )),\n    h4: discovered.H4 || ((props: any) => (\n      <h4 className=\"scroll-m-20 text-xl font-semibold tracking-tight mt-6\" {...props} />\n    )),\n    h5: discovered.H5 || ((props: any) => (\n      <h5 className=\"scroll-m-20 text-lg font-semibold tracking-tight mt-6\" {...props} />\n    )),\n    h6: discovered.H6 || ((props: any) => (\n      <h6 className=\"scroll-m-20 text-base font-semibold tracking-tight mt-6\" {...props} />\n    )),\n\n    // Paragraph\n    p: discovered.Paragraph || ((props: any) => (\n      <p className=\"leading-7 [&:not(:first-child)]:mt-6\" {...props} />\n    )),\n\n    // Links\n    a: (props: any) => (\n      <a\n        className=\"font-medium underline underline-offset-4 hover:text-primary transition-colors\"\n        {...props}\n      />\n    ),\n\n    // Lists (with fallbacks)\n    ul: discovered.UnorderedList || ((props: any) => (\n      <ul className=\"my-6 ml-6 list-disc [&>li]:mt-2\" {...props} />\n    )),\n    ol: discovered.OrderedList || ((props: any) => (\n      <ol className=\"my-6 ml-6 list-decimal [&>li]:mt-2\" {...props} />\n    )),\n    li: discovered.ListItem || ((props: any) => <li className=\"mt-2\" {...props} />),\n\n    // Blockquote\n    blockquote: discovered.Blockquote || ((props: any) => (\n      <blockquote\n        className=\"mt-6 border-l-2 pl-6 italic [&>*]:text-muted-foreground\"\n        {...props}\n      />\n    )),\n\n    // Images\n    img: discovered.Image || ((props: any) => (\n      <img className=\"rounded-lg my-6\" alt=\"\" {...props} />\n    )),\n\n    // Horizontal rule\n    hr: discovered.HorizontalRule || ((props: any) => (\n      <hr className=\"my-8 border-border\" {...props} />\n    )),\n\n    // Code\n    code: discovered.InlineCode || ((props: any) => (\n      <code\n        className=\"relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold\"\n        {...props}\n      />\n    )),\n\n    pre: discovered.CodeBlock || ((props: any) => (\n      <pre\n        className=\"mb-4 mt-6 overflow-x-auto rounded-lg border bg-zinc-950 p-4 dark:bg-zinc-900\"\n        {...props}\n      />\n    )),\n\n    // Text formatting\n    strong: discovered.Strong || ((props: any) => <strong className=\"font-semibold\" {...props} />),\n    em: discovered.Em || ((props: any) => <em className=\"italic\" {...props} />),\n\n    // Tables\n    table: (props: any) => (\n      <div className=\"my-6 w-full overflow-y-auto\">\n        <table className=\"w-full\" {...props} />\n      </div>\n    ),\n    tr: (props: any) => <tr className=\"m-0 border-t p-0 even:bg-muted\" {...props} />,\n    th: (props: any) => (\n      <th\n        className=\"border px-4 py-2 text-left font-bold [&[align=center]]:text-center [&[align=right]]:text-right\"\n        {...props}\n      />\n    ),\n    td: (props: any) => (\n      <td\n        className=\"border px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right\"\n        {...props}\n      />\n    ),\n\n    // All custom components (auto-discovered)\n    ...discovered,\n\n    // User overrides\n    ...components,\n  }\n}\n\n/**\n * Render MDX content with Contentlayer (auto-discovers components)\n *\n * @example With Contentlayer:\n * ```tsx\n * import { Mdx } from '@/components/mdx-ui/mdx-components'\n * import { allPosts } from 'contentlayer/generated'\n *\n * export default function Page({ params }) {\n *   const post = allPosts.find(p => p.slug === params.slug)\n *   return <Mdx code={post.body.code} />\n * }\n * ```\n */\nexport function Mdx({\n  code,\n  components: customComponents = {},\n}: {\n  code: string\n  components?: MDXComponents\n}) {\n  let useMDXComponent: any\n\n  // Try multiple Contentlayer versions\n  try {\n    const contentlayer = tryImport(\"next-contentlayer2/hooks\") ||\n                         tryImport(\"next-contentlayer/hooks\")\n\n    if (!contentlayer) {\n      return (\n        <div className=\"rounded-lg border-2 border-red-500 bg-red-50 dark:bg-red-950/20 p-6 my-8\">\n          <h3 className=\"text-red-600 dark:text-red-400 font-bold mb-2\">\n            ðŸ“¦ Missing Dependency\n          </h3>\n          <p className=\"mb-4 text-sm\">\n            To use the <code className=\"bg-red-100 dark:bg-red-900 px-1 rounded\">Mdx</code> component, install Contentlayer:\n          </p>\n          <pre className=\"bg-zinc-950 text-white text-xs p-4 rounded overflow-x-auto\">\n            npm install next-contentlayer2{'\\n'}\n            {' '} # or{'\\n'}\n            npm install next-contentlayer\n          </pre>\n          <p className=\"mt-4 text-sm text-muted-foreground\">\n            <strong>Alternative:</strong> Use{' '}\n            <code className=\"bg-muted px-1 rounded\">useMDXComponents</code> with @next/mdx\n          </p>\n        </div>\n      )\n    }\n\n    useMDXComponent = contentlayer.useMDXComponent\n  } catch (error) {\n    return <div className=\"text-red-500\">Error loading MDX: {String(error)}</div>\n  }\n\n  const Component = useMDXComponent(code)\n  const allComponents = useMDXComponents(customComponents)\n\n  return (\n    <div className=\"mdx\">\n      <Component components={allComponents} />\n    </div>\n  )\n}\n"
    }
  ]
}
