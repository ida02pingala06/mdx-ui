{
  "name": "file-tree",
  "type": "component",
  "description": "Simple string-based file/folder tree structure with minimal syntax",
  "dependencies": [],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "file-tree.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"./lib/utils\"\n\ninterface FileTreeProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: string\n}\n\ninterface ParsedNode {\n  name: string\n  level: number\n  isFolder: boolean\n  defaultOpen: boolean\n}\n\nfunction parseTree(input: string): ParsedNode[] {\n  const lines = input.trim().split('\\n').filter(line => line.trim())\n  const nodes: ParsedNode[] = []\n\n  for (const line of lines) {\n    // Count leading spaces to determine level\n    const match = line.match(/^(\\s*)(.+)$/)\n    if (!match) continue\n\n    const indent = match[1].length\n    const level = Math.floor(indent / 2) // 2 spaces = 1 level\n    let name = match[2].trim()\n\n    // Check if it's a folder (ends with /)\n    const isFolder = name.endsWith('/')\n    if (isFolder) {\n      name = name.slice(0, -1) // Remove trailing /\n    }\n\n    // Check if folder should be open by default (ends with * before /)\n    let defaultOpen = false\n    if (name.endsWith('*')) {\n      defaultOpen = true\n      name = name.slice(0, -1) // Remove trailing *\n    }\n\n    nodes.push({ name, level, isFolder, defaultOpen })\n  }\n\n  return nodes\n}\n\ninterface TreeItemInternalProps {\n  node: ParsedNode\n  children?: React.ReactNode\n  level: number\n}\n\nfunction TreeItemInternal({ node, children, level }: TreeItemInternalProps) {\n  const [isOpen, setIsOpen] = React.useState(node.defaultOpen)\n  const hasChildren = React.Children.count(children) > 0\n\n  // File/folder icons\n  const Icon = () => {\n    if (node.isFolder) {\n      return (\n        <span className=\"mr-1 text-blue-500\">\n          {isOpen ? \"ğŸ“‚\" : \"ğŸ“\"}\n        </span>\n      )\n    }\n    return <span className=\"mr-1 text-gray-400\">ğŸ“„</span>\n  }\n\n  // Tree line characters\n  const prefix = level > 0 ? \"â”‚   \".repeat(level - 1) : \"\"\n  const connector = level > 0 ? \"â”œâ”€â”€ \" : \"\"\n\n  const handleToggle = () => {\n    if (node.isFolder && hasChildren) {\n      setIsOpen(!isOpen)\n    }\n  }\n\n  return (\n    <div className=\"leading-relaxed\">\n      <div\n        className={cn(\n          \"flex items-center\",\n          node.isFolder && hasChildren && \"cursor-pointer hover:text-foreground\"\n        )}\n        onClick={handleToggle}\n      >\n        <span className=\"select-none text-muted-foreground\">\n          {prefix}\n          {connector}\n        </span>\n        <Icon />\n        <span className={cn(node.isFolder && \"font-semibold\")}>{node.name}</span>\n      </div>\n      {node.isFolder && isOpen && hasChildren && (\n        <div>{children}</div>\n      )}\n    </div>\n  )\n}\n\nfunction buildTree(nodes: ParsedNode[]): React.ReactNode {\n  if (nodes.length === 0) return null\n\n  const result: React.ReactNode[] = []\n  let i = 0\n\n  while (i < nodes.length) {\n    const currentNode = nodes[i]\n    const currentLevel = currentNode.level\n\n    // Find all children (nodes with level > currentLevel that come immediately after)\n    const children: ParsedNode[] = []\n    let j = i + 1\n\n    while (j < nodes.length && nodes[j].level > currentLevel) {\n      children.push(nodes[j])\n      j++\n    }\n\n    // Build child tree\n    const childElements = buildTree(children)\n\n    result.push(\n      <TreeItemInternal key={i} node={currentNode} level={currentLevel}>\n        {childElements}\n      </TreeItemInternal>\n    )\n\n    // Skip the children we've already processed\n    i = j\n  }\n\n  return <>{result}</>\n}\n\nexport function FileTree({ children, className, ...props }: FileTreeProps) {\n  const nodes = React.useMemo(() => parseTree(children), [children])\n  const tree = React.useMemo(() => buildTree(nodes), [nodes])\n\n  return (\n    <div\n      className={cn(\n        \"rounded-lg border bg-muted/30 p-4 font-mono text-sm\",\n        className\n      )}\n      {...props}\n    >\n      {tree}\n    </div>\n  )\n}\n\nFileTree.displayName = \"FileTree\"\n"
    }
  ]
}
