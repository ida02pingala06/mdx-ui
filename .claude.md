# Claude Instructions for mdx-ui Project

## Project Overview

**mdx-ui** is a shadcn-style component library specifically for MDX documentation. It provides copy-paste React components designed for technical documentation, inspired by react.dev.

### Key Principles

1. **Copy-paste model** - Users own the code, no runtime dependencies
2. **MDX-first** - Components built specifically for markdown documentation
3. **No UI frameworks** - Pure React + Tailwind CSS (NO Radix UI, NO shadcn/ui components)
4. **Dark theme default** - With light/dark toggle like shadcn
5. **TypeScript only** - Full type safety

## Architecture

### Monorepo Structure

```
mdx-ui/
├── packages/cli/          # CLI tool (Node.js, no React)
├── apps/www/              # Next.js documentation site (App Router)
├── registry/mdx/          # Component definitions (JSON files)
└── components/mdx/        # Shared component source
```

### Package Manager

- **pnpm** (version 9.0.6) - ALWAYS use pnpm, never npm or yarn
- Workspaces configured in `pnpm-workspace.yaml`

### Tech Stack

- **CLI**: Commander.js, prompts, chalk, ora, execa, fs-extra, axios, zod
- **Docs Site**: Next.js 14 (App Router), React 18, MDX, Tailwind CSS, next-themes
- **Build**: tsup for CLI, Next.js for website, Turborepo for orchestration
- **Styling**: Tailwind CSS only, class-variance-authority for variants

## Critical Rules

### 1. NO External UI Libraries

❌ **NEVER use:**
- Radix UI primitives
- shadcn/ui components
- Any headless UI library
- Material UI, Chakra UI, etc.

✅ **ONLY use:**
- Pure React (useState, useContext, useEffect, etc.)
- Tailwind CSS classes
- class-variance-authority (CVA) for variant management

### 2. Component Design Philosophy

**Our components are NOT shadcn components.** Key differences:

| Aspect | shadcn/ui | mdx-ui (Our Project) |
|--------|-----------|----------------------|
| Purpose | App UI components | Documentation components |
| Use case | Buttons, forms, dialogs | Callouts, code blocks, tabs |
| Dependencies | Radix UI + Tailwind | Only Tailwind |
| Context | React apps | MDX files |
| Examples | Button, Select, Dialog | Callout, CodeBlock, Steps |

### 3. Package Naming

- CLI package: `@mdx-ui/cli` (scoped name for workspace filters)
- Documentation site: `www` (simple name)
- Use `pnpm --filter=@mdx-ui/cli` for CLI commands
- Use `pnpm --filter=www` for website commands

### 4. Theme System

Following shadcn's approach:

- **CSS Variables** with HSL values (e.g., `--background: 0 0% 3.9%`)
- **Tailwind dark mode** with `class` strategy
- **next-themes** for theme management
- **Default theme**: Dark
- **Theme toggle**: Moon/Sun icons (inverse - sun in dark mode, moon in light mode)

### 5. CLI Behavior

The CLI should:
- Fetch components from registry (local fallback for dev)
- Copy `.tsx` files to user's project
- Install dependencies (detect pnpm/yarn/npm)
- Create config file (`mdx-ui.json`)
- Generate `lib/utils.ts` with `cn()` function

### 6. Component Registry

Each component in `registry/mdx/` is a JSON file:

```json
{
  "name": "component-name",
  "files": [
    {
      "path": "component-name.tsx",
      "content": "import * as React from \"react\"..."
    }
  ],
  "dependencies": ["clsx", "tailwind-merge"]
}
```

### 7. Component Patterns

All components should:
- Use TypeScript with proper interfaces
- Support `className` prop for customization
- Use `cn()` utility for class merging
- Have dark theme styling with CSS variables
- Use CVA for variants (if needed)
- Extend HTML element props (e.g., `React.HTMLAttributes<HTMLDivElement>`)

Example structure:
```tsx
import * as React from "react"
import { cn } from "@/lib/utils"

export interface ComponentProps extends React.HTMLAttributes<HTMLDivElement> {
  // Component-specific props
}

export function Component({ className, ...props }: ComponentProps) {
  return <div className={cn("base-classes", className)} {...props} />
}
```

### 8. Available Components

Current components (all pure React + Tailwind):

1. **Callout** - Alert boxes with variants (info, warning, danger, success)
2. **CodeBlock** - Code display with optional title
3. **Tabs** - Pure React tabs (NO Radix UI) with Context API
4. **Steps** - Numbered step-by-step guides

### 9. Next.js Documentation Site

- **App Router** (NOT Pages Router)
- MDX support with `@next/mdx`
- Dark/light theme with `next-themes`
- Theme toggle in header
- CSS variables for theming
- Running on `http://localhost:3000`

### 10. Development Workflow

**Build CLI:**
```bash
pnpm cli:build
```

**Run website:**
```bash
pnpm www:dev
```

**Test CLI locally:**
```bash
/home/surya/surya_ws/personal/mdx-ui/packages/cli/dist/index.js list
```

## Component Development Guidelines

### When adding a new component:

1. Create JSON file in `registry/mdx/`
2. Write pure React + Tailwind component (NO external UI libs)
3. Use dark theme colors (gray-900, gray-950 backgrounds, white text)
4. Add to CLI `list` command description
5. Test with local registry fallback
6. Add example to documentation site

### When modifying existing components:

1. Update both `registry/mdx/` JSON and `apps/www/components/mdx/`
2. Ensure dark/light theme compatibility
3. Rebuild CLI: `pnpm cli:build`
4. Test in documentation site

## Common Tasks

### Add a new MDX component

1. Create component file: `registry/mdx/new-component.json`
2. Write component code (pure React + Tailwind)
3. Add dependencies to JSON (usually just `clsx`, `tailwind-merge`)
4. Update CLI list command in `packages/cli/src/commands/list.ts`
5. Copy to docs site: `apps/www/components/mdx/new-component.tsx`

### Update theme colors

Edit `apps/www/app/globals.css`:
- `:root` for light mode
- `.dark` for dark mode
- Use HSL values (e.g., `0 0% 3.9%`)

### Debug CLI issues

1. Check local registry path: `packages/cli/src/utils/fetch-component.ts`
2. Rebuild: `pnpm cli:build`
3. Test directly: `./packages/cli/dist/index.js list`

## Anti-Patterns to Avoid

❌ Don't use Radix UI or any headless UI library
❌ Don't create app UI components (buttons, inputs, selects)
❌ Don't use Pages Router (use App Router)
❌ Don't hardcode colors (use CSS variables)
❌ Don't create documentation files proactively (user will ask)
❌ Don't add features beyond what's requested (avoid over-engineering)

## Questions to Ask Before Implementing

1. Does this component need Radix UI? (Answer should be NO)
2. Is this component for documentation or app UI? (Should be documentation)
3. Does it work with MDX? (Should be yes)
4. Does it support dark/light themes? (Should be yes)
5. Is it using pure React + Tailwind only? (Should be yes)

## File References

- CLI entry: `packages/cli/src/index.ts`
- CLI commands: `packages/cli/src/commands/`
- Component registry: `registry/mdx/`
- Docs homepage: `apps/www/app/page.tsx`
- Theme config: `apps/www/app/globals.css`
- Tailwind config: `apps/www/tailwind.config.js`

## Git Workflow

- Use conventional commits
- Don't commit `node_modules/`, `.next/`, `dist/`
- Commit message format: `feat: add callout component`

## Remember

This is **mdx-ui**, NOT shadcn/ui. We're building documentation-focused components for MDX files, not general-purpose UI components for React apps. Always keep this distinction clear.
